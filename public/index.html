<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TermLink Mobile</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="lib/xterm.css">
    <script src="lib/xterm.js"></script>
    <script src="lib/xterm-addon-fit.js"></script>
</head>

<body>
    <div id="app-container">
        <!-- Title Bar -->
        <div id="title-bar">
            <div class="left-controls">
                <button id="btn-menu" class="nav-btn" title="Menu">‚ò∞</button>
                <span id="app-title">TermLink</span>
            </div>
            <div class="right-controls">
                <button id="btn-server-manager" class="nav-btn" title="Manage Servers">‚öôÔ∏è</button>
                <button id="btn-new-session" class="nav-btn" title="New Session">+</button>
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <div id="sidebar">
            <div class="sidebar-header">
                <h2>TermLink</h2>
            </div>

            <div class="sidebar-section">
                <h3>Servers</h3>
                <ul id="sidebar-server-list">
                    <!-- Servers injected here -->
                </ul>
                <button id="btn-sidebar-add-server" class="btn-sidebar-action">+ Add Server</button>
            </div>

            <div class="sidebar-section">
                <h3>Sessions</h3>
                <ul id="session-list">
                    <!-- Session items will be injected here -->
                </ul>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="main-content">
            <div id="status-overlay"></div>

            <!-- Server Connection Overlay (Initial/Fallback) -->
            <div id="connection-overlay" style="display:none;">
                <h2>Connect to Server</h2>
                <div class="form-group">
                    <label>Server URL</label>
                    <input type="text" id="server-url-input" placeholder="http://192.168.1.100:3000">
                </div>
                <button id="btn-save-connection" class="btn-primary">Connect</button>
            </div>

            <!-- Server Manager Modal -->
            <div id="server-manager-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Server Management</h3>
                        <button id="btn-close-server-manager" class="btn-close">√ó</button>
                    </div>
                    <div class="modal-body">
                        <ul id="server-list" class="server-list">
                            <!-- Server items injected here -->
                        </ul>
                        <div class="add-server-form">
                            <h4>Add New Server</h4>
                            <input type="text" id="new-server-name" placeholder="Name (e.g. Home PC)">
                            <input type="text" id="new-server-url" placeholder="URL (http://...)">
                            <button id="btn-add-server" class="btn-primary" style="width:100%">Add Server</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- New Session Modal -->
            <div id="new-session-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>New Session</h3>
                        <button id="btn-close-new-session" class="btn-close">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group" style="width:100%">
                            <label>Session Name</label>
                            <input type="text" id="session-name-input" placeholder="My Terminal">
                        </div>
                        <div class="form-group" style="width:100%">
                            <label>Target Server</label>
                            <select id="server-select-input"
                                style="width:100%; padding:10px; background:#1e1e1e; color:white; border:1px solid #444; border-radius:4px;">
                                <!-- Options injected via JS -->
                            </select>
                        </div>
                        <button id="btn-create-session" class="btn-primary" style="width:100%">Create</button>
                    </div>
                </div>
            </div>

            <div id="input-overlay">
                <textarea id="input-buffer" placeholder="Type command here..."></textarea>
                <div class="input-controls">
                    <button id="btn-clear">Clear</button>
                    <button id="btn-close">Close</button>
                    <button id="btn-send">Send</button>
                </div>
            </div>
            <div id="terminal-container"></div>
            <div id="toolbar">
                <!-- Row 1: System & Modifiers -->
                <div class="key-row">
                    <!-- Nav moved to top -->
                    <button class="key" id="btn-paste" title="Paste">üìã</button>
                    <button class="key" data-key="Esc">Esc</button>
                    <button class="key" data-key="Tab">Tab</button>
                    <button class="key" data-key="Ctrl">Ctrl</button>
                    <button class="key" data-key="Alt">Alt</button>
                    <button class="key" id="btn-toggle-input" title="Input Mode">üìù</button>
                </div>
                <!-- Row 2: Symbols & Jumps -->
                <div class="key-row">
                    <button class="key" data-key="-">-</button>
                    <button class="key" data-key="/">/</button>
                    <button class="key" data-key="|">|</button>
                    <button class="key" data-key="Home">Home</button>
                    <button class="key" data-key="End">End</button>
                    <button class="key" data-key="PgUp">PgUp</button>
                    <button class="key" data-key="PgDn">PgDn</button>
                </div>
                <!-- Row 3: Navigation & Control -->
                <div class="key-row">
                    <button class="key" data-key="Left">‚Üê</button>
                    <button class="key" data-key="Down">‚Üì</button>
                    <button class="key" data-key="Up">‚Üë</button>
                    <button class="key" data-key="Right">‚Üí</button>
                    <button class="key" id="btn-ctrl-c" data-key="Ctrl-C" style="color:red;">üõë</button>
                    <button class="key" data-key="Enter">Enter</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="client.js?v=4"></script>
</body>

</html>
