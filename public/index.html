<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TermLink Mobile</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
</head>

<body>
    <div id="app-container">
        <!-- Sidebar Navigation (Hidden by default on mobile) -->
        <div id="sidebar">
            <div class="sidebar-header">
                <h2>Sessions</h2>
                <button id="btn-new-session">+</button>
            </div>
            <ul id="session-list">
                <!-- Session items will be injected here -->
            </ul>
        </div>

        <!-- Main Content Area -->
        <div id="main-content">
            <!-- Header / Navbar -->
            <header id="navbar">
                <button id="btn-menu">‚ò∞</button>
                <h1 id="session-title">TermLink</h1>
                <div class="nav-actions">
                    <button id="btn-mode-switch" title="Toggle Terminal Mode">üíª</button>
                    <button id="btn-theme">üåì</button>
                    <!-- Connection Status Indicator -->
                    <div id="connection-status" class="status-indicator"></div>
                </div>
            </header>

            <!-- Codex Status Bar -->
            <div id="codex-status-bar" class="codex-status-bar hidden">
                <span id="codex-status-text">Codex: Checking...</span>
                <button id="btn-copy-login" class="hidden">Copy Login Command</button>
            </div>

            <!-- Chat View (Primary Interface) -->
            <div id="chat-view">
                <div id="chat-history">
                    <div class="message system">
                        <div class="bubble">Welcome to TermLink AI. Type a command or ask a question.</div>
                    </div>
                </div>
            </div>

            <!-- Terminal Drawer (Collapsible) -->
            <div id="terminal-drawer">
                <div class="drawer-handle">
                    <span class="handle-bar"></span>
                </div>
                <!-- Xterm Container -->
                <div id="terminal-container"></div>
                <!-- Mobile Toolbar (Persistent in Drawer Mode) -->
                <!-- Mobile Toolbar (Persistent in Drawer Mode) -->
                <div id="toolbar">
                    <!-- Row 1: Tools & Special Chars -->
                    <div class="toolbar-row">
                        <div class="key action-key" id="btn-input-overlay" title="Long Text Input">‚úèÔ∏è</div>
                        <div class="key action-key" id="btn-clipboard-paste" title="Paste Clipboard">üìã</div>
                        <div class="key action-key" id="btn-ctrl-c" title="Interrupt (Ctrl+C)" style="color: #ff4444;">
                            üõë</div>
                        <div class="key" data-key="Esc">Esc</div>
                        <div class="key" data-key="Tab">Tab</div>
                        <div class="key" data-key="Ctrl">Ctrl</div>
                        <div class="key" data-key="Alt">Alt</div>
                        <div class="key" data-key="-">-</div>
                        <div class="key" data-key="/">/</div>
                        <div class="key" data-key="|">|</div>
                    </div>
                    <!-- Row 2: Navigation -->
                    <div class="toolbar-row">
                        <div class="key" data-key="Home">Home</div>
                        <div class="key" data-key="Up">‚Üë</div>
                        <div class="key" data-key="End">End</div>
                        <div class="key" data-key="PgUp">PgUp</div>
                    </div>
                    <!-- Row 3: Navigation -->
                    <div class="toolbar-row">
                        <div class="key" data-key="Left">‚Üê</div>
                        <div class="key" data-key="Down">‚Üì</div>
                        <div class="key" data-key="Right">‚Üí</div>
                        <div class="key" data-key="PgDn">PgDn</div>
                    </div>
                </div>
            </div>

            <!-- Input Overlay (Long Text Entry) -->
            <div id="input-overlay-modal" class="hidden">
                <div class="overlay-header">
                    <h3>Input Text</h3>
                    <button id="btn-close-overlay">‚úñ</button>
                </div>
                <textarea id="overlay-textarea" placeholder="Type or paste text here..."></textarea>
                <button id="btn-send-overlay">Send to Terminal</button>
            </div>
        </div>

        <!-- Input Area (Fixed at bottom of Main Content) -->
        <div id="input-area">
            <button id="btn-stop" style="color: #ff4444;">üõë</button>
            <button id="btn-toggle-drawer">üíª</button>
            <textarea id="chat-input" placeholder="Ask AI or type command..." rows="1"></textarea>
            <button id="btn-send-chat">‚û§</button>
        </div>
    </div>

    <!-- Overlay for Status Messages -->
    <div id="status-overlay" style="display: none;"></div>
    </div>

    <script src="client.js"></script>
</body>

</html>